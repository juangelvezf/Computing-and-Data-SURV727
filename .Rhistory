summarise(mean_loans = mean(loans))
result <- new_data %>%
group_by(hh_income_level) %>%
summarise(mean_crime = mean(crime))
result
result <- new_data %>%
group_by(hh_income_level) %>%
summarise(mean_crime = mean(crime))%>%
summarise(mean_loans = mean(loans))
result <- new_data %>%
group_by(hh_income_level) %>%
summarise(mean_crime = mean(crime, na.rm = TRUE)))
head(new_data$hh_income_level)
new_data$hh_income_level <- "Below average median household income"
new_data$hh_income_level[which(new_data$hh_income > 54379.19)] <-"Above average median household income"
new_data %>%
group_by(hh_income_level) %>%
mean(pop,na.rm = TRUE)
result <- new_data %>%
group_by(hh_income_level) %>%
summarise(mean_crime = mean(crime, na.rm = TRUE)))
result <- new_data %>%
group_by(hh_income_level) %>%
summarise(mean_crime = mean(crime)))
result <- new_data %>%
group_by(hh_income_level) %>%
summarise(mean_crime = mean(crime))
result
result <- new_data %>%
group_by(hh_income_level) %>%
summarise(mean_crime = mean(crime, na.rm = TRUE))
result
result <- new_data %>%
group_by(hh_income_level) %>%
summarise(mean_crime = mean(crime, na.rm = TRUE))+
summarise(mean_loans = mean(loans, na.rm = TRUE))
result <- new_data %>%
group_by(hh_income_level) %>%
summarise(mean_crime = mean(crime, na.rm = TRUE)) %>%
summarise(mean_loans = mean(loans, na.rm = TRUE))
result <- new_data %>%
group_by(hh_income_level) %>%
summarise(mean_crime = mean(crime, na.rm = TRUE))
result
mean_crime_loan <- new_data %>%
group_by(hh_income_level) %>%
summarise(mean_loans = mean(loans, na.rm = TRUE))
mean_crime_hhincome <- new_data %>%
group_by(hh_income_level) %>%
summarise(mean_crime = mean(crime, na.rm = TRUE))
mean_loans_hhincome <- new_data %>%
group_by(hh_income_level) %>%
summarise(mean_loans = mean(loans, na.rm = TRUE))
mean_crime_hhincome
mean_loans_hhincome
mean(new_data$hh_income)
sum(is.na(res2$location))
sum(is.na(acs_il2$location))
View(res2)
summary(res2$location)
summary((acs_il2$location))
summary(acs_il2$location)
summary(acs_il2$location)
View(acs_il2)
summary(res2$location)
summary(res2$location)
summary(acs_il2$location)
intersect(res2$location, acs_il2$location)
library(tidyverse)
library(tidyverse)
library(gtrendsR)
library(censusapi)
library(dplyr)
library(tidyr)
res2 %>%
slice_max(loans, n = 6)
res2 %>%
arrange(desc(loans))
qplot(loans, crime, data=res2)
qplot(loans, crime, data=res2)
plot(loans, crime, data=res2)
res <- gtrends(c("crime", "loans"), geo = "US-IL", time = "2016-01-01 2016-12-31", low_search_volume = TRUE)
plot(res)
names(res)
is_tibble(res)
is_tibble(as_tibble(res$interest_by_city))
res1 <- as_tibble(res$interest_by_city)
head(res1)
res1 %>%
group_by(keyword) %>%
summarise(hits_mean = mean(hits, na.rm = TRUE),
hits_median = median(hits, na.rm = TRUE),
hits_sd = sd(hits, na.rm = TRUE))
res2 <- pivot_wider(res1,
names_from = keyword,
values_from = hits)
res2 <- pivot_wider(res1,
names_from = keyword,
values_from = hits)
head(res2)
res2 <- pivot_wider(res1,
names_from = keyword,
values_from = hits)
{data} %>%
dplyr::group_by(location, geo, gprop, keyword) %>%
dplyr::summarise(n = dplyr::n(), .groups = "drop") %>%
dplyr::filter(n > 1L)
library(tidyverse)
library(gtrendsR)
library(censusapi)
library(dplyr)
library(tidyr)
res <- gtrends(c("crime", "loans"), geo = "US-IL", time = "2016-01-01 2016-12-31", low_search_volume = TRUE)
res <- gtrends(c("crime", "loans"), geo = "US-IL", time = "2016-01-01 2016-12-31", low_search_volume = TRUE)
plot(res)
names(res)
is_tibble(res)
is_tibble(as_tibble(res$interest_by_city))
res1 <- as_tibble(res$interest_by_city)
head(res1)
res1 %>%
group_by(keyword) %>%
summarise(hits_mean = mean(hits, na.rm = TRUE),
hits_median = median(hits, na.rm = TRUE),
hits_sd = sd(hits, na.rm = TRUE))
res2 <- pivot_wider(res1,
names_from = keyword,
values_from = hits)
head(res2)
res2 <- pivot_wider(res1,
names_from = keyword,
values_from = hits)
head(res2)
res2 %>%
arrange(desc(loans))
plot(loans, crime, data=res2)
qplot(loans, crime, data=res2)
qplot(crime, loans, data=res2)
qplot(loans, crime, data=res2)
library(tidyverse)
library(tidyverse)
library(gtrendsR)
library(censusapi)
library(dplyr)
library(tidyr)
res2 <- pivot_wider(res1,
names_from = keyword,
values_from = hits)
head(res1)
View(res1)
res2 <- pivot_wider(res1,
names_from = keyword,
values_from = hits)
head(res2)
res2 %>%
arrange(desc(loans))
res2 %>%
arrange(desc(loans))
res2 <- pivot_wider(res1,
names_from = keyword,
values_from = hits)
head(res2)
names(res)
is_tibble(res)
is_tibble(as_tibble(res$interest_by_city))
res1 <- as_tibble(res$interest_by_city)
head(res1)
library(tidyverse)
library(tidyverse)
library(gtrendsR)
library(censusapi)
library(dplyr)
library(tidyr)
res <- gtrends(c("crime", "loans"), geo = "US-IL", time = "2016-01-01 2016-12-31", low_search_volume = TRUE)
plot(res)
names(res)
is_tibble(res)
is_tibble(as_tibble(res$interest_by_city))
res1 <- as_tibble(res$interest_by_city)
head(res1)
res1 %>%
group_by(keyword) %>%
summarise(hits_mean = mean(hits, na.rm = TRUE),
hits_median = median(hits, na.rm = TRUE),
hits_sd = sd(hits, na.rm = TRUE))
res2 <- pivot_wider(res1,
names_from = keyword,
values_from = hits)
res1 <- as_tibble(res$interest_by_city)
head(res1)
res1 %>%
group_by(keyword) %>%
summarise(hits_mean = mean(hits, na.rm = TRUE),
hits_median = median(hits, na.rm = TRUE),
hits_sd = sd(hits, na.rm = TRUE))
res2 <- pivot_wider(res1,
names_from = keyword,
values_from = hits)
res2 <- res1 %>%
group_by(keyword) %>%
mutate(row = row_number()) %>%
tidyr::pivot_wider(names_from = keyword, values_from = hits) %>%
select(-row)
head(res2)
res2 %>%
arrange(desc(loans))
qplot(loans, crime, data=res2)
qplot(crime, loans, data=res2)
anti_join(res2, acs_il2, by = "location")
anti_join(res2, acs_il2, by = "location")
plot(crime, loans, data=res2)
#There isn´t a clear a relationship between the search intensities between the crime and loans.
names(res2)
plot(crime, loans, data=res2)
#There isn´t a clear a relationship between the search intensities between the crime and loans.
names(res2)
plot(res2$crime, res2$loans)
#There isn´t a clear a relationship between the search intensities between the crime and loans.
names(res2)
res2 <- res1 %>%
group_by(keyword) %>%
mutate(row = row_number()) %>%
tidyr::pivot_wider(names_from = keyword, values_from = hits) %>%
select(-row)
head(res2)
View(res2)
res2 <- res1 %>%
mutate(row = row_number()) %>%
tidyr::pivot_wider(names_from = keyword, values_from = hits) %>%
select(-row)
head(res2)
View(res1)
res2 <- res1 %>%
mutate(row = row_number()) %>%
tidyr::pivot_wider(names_from = keyword, values_from = hits)
head(res2)
View(res2)
res2 <- pivot_wider(res1, names_from = keyword, values_from = hits)
res2
res2 <- res1 %>%
tidyr::pivot_wider(names_from = keyword, values_from = hits)
head(res2)
res2 <- res1 %>%
tidyr::pivot_wider(names_from = keyword, values_from = hits) %>%
select(-row)
res3 <- pivot_wider(res1,
names_from = keyword,
values_from = hits)
res3 <- pivot_wider(res,
names_from = keyword,
values_from = hits)
head(res1)
res2 <-res1 %>%
pivot_wider(id_cols = c('location', 'geo','gprop'),
values_from = starts_with('hits'),
names_from = keyword)
res2 <-res1 %>%
pivot_wider(id_cols = c('location'),
values_from = starts_with('hits'),
names_from = keyword)
res1 %>%
dplyr::group_by(location, keyword) %>%
dplyr::summarise(n = dplyr::n(), .groups = "drop") %>%
dplyr::filter(n > 1L)
res2 <-res1 %>%
pivot_wider(id_cols = c('location'),
values_from = hits),
res1 %>%
dplyr::group_by(location, keyword) %>%
dplyr::summarise(n = dplyr::n(), .groups = "drop") %>%
dplyr::filter(n > 1L)
res2 <-res1 %>%
pivot_wider(id_cols = c('location'),
values_from = starts_with('hits'),
names_from = keyword)
res2 <-res1 %>%
pivot_wider(id_cols = c('location'),
values_from = starts_with('hits'),
names_from = keyword,
values_fn = {summary_fun})
res2 <-res1 %>%
pivot_wider(id_cols = c('location'),
values_from = starts_with('hits'),
names_from = keyword)
a<- res1 %>%
dplyr::group_by(location, keyword) %>%
dplyr::summarise(n = dplyr::n(), .groups = "drop") %>%
dplyr::filter(n > 1L)
a
res1 %>%
dplyr::group_by(location, keyword) %>%
dplyr::summarise(n = dplyr::n(), .groups = "drop") %>%
dplyr::filter(n > 1L)
res2 <-res1 %>%
pivot_wider(id_cols = c('location'),
values_from = starts_with('hits'),
names_from = keyword)
res2 <-res1 %>%
pivot_wider(id_cols = c('location'),
values_from = starts_with('hits'),
names_from = keyword)
View(res2)
head(res2)
plot(crime, loans, data=res2)
res2 <- pivot_wider(res1, names_from = keyword, values_from = hits)
res2
res2 <- pivot_wider(res1,
names_from = keyword,
values_from = hits)
head(res1)
View(res1)
res3 <- res1 %>% separate(keyword, c("crime", "loans"))
head(res3)
head(res3)
View(res3)
res3 <-split(res1, word = res1$keyword)
head(res3)
res3 <-split(res1, f =  res1$keyword)
head(res3)
View(res3)
res2 <- pivot_wider(res1,
names_from = keyword,
values_from = hits)
res2 <- pivot_wider(res1,
names_from = keyword,
values_from = hits,
values_fn = list)
head(res2)
res2 <- pivot_wider(res1,
names_from = keyword,
values_from = hits)
res2 <- pivot_wider(res1,
names_from = keyword,
values_from = hits)
library(tidyr)
res2 <- pivot_wider(res1,
names_from = keyword,
values_from = hits)
head(res2)
rm(list=ls())
packages = c("tidyverse","dplyr", "gtrendsR","censusapi")
package.check <- lapply(packages, FUN = function(x) {
if (!require(x, character.only = TRUE)) {
install.packages(x, dependencies = TRUE)
library(x, character.only = TRUE)
}})
res <- gtrends(c("crime", "loans"), geo = "US-IL", time = "2016-01-01 2016-12-31", low_search_volume = TRUE)
plot(res)
names(res)
is_tibble(res)
is_tibble(as_tibble(res$interest_by_city))
res1 <- as_tibble(res$interest_by_city)
head(res1)
res1 %>%
group_by(keyword) %>%
summarise(hits_mean = mean(hits, na.rm = TRUE),
hits_median = median(hits, na.rm = TRUE),
hits_sd = sd(hits, na.rm = TRUE))
res2 <- pivot_wider(res1,
names_from = keyword,
values_from = hits)
head(res2)
packages = c("tidyverse", "gtrendsR","censusapi","tidyr")
package.check <- lapply(packages, FUN = function(x) {
if (!require(x, character.only = TRUE)) {
install.packages(x, dependencies = TRUE)
library(x, character.only = TRUE)
}})
rm(list=ls())
packages = c("tidyverse", "gtrendsR","censusapi","tidyr")
package.check <- lapply(packages, FUN = function(x) {
if (!require(x, character.only = TRUE)) {
install.packages(x, dependencies = TRUE)
library(x, character.only = TRUE)
}})
res <- gtrends(c("crime", "loans"), geo = "US-IL", time = "2016-01-01 2016-12-31", low_search_volume = TRUE)
res1 <- as_tibble(res$interest_by_city)
head(res1)
res1 %>%
group_by(keyword) %>%
summarise(hits_mean = mean(hits, na.rm = TRUE),
hits_median = median(hits, na.rm = TRUE),
hits_sd = sd(hits, na.rm = TRUE))
res2 <- pivot_wider(res1,
names_from = keyword,
values_from = hits)
res2 %>%
arrange(desc(loans))
rm(list=ls())
packages = c("tidyverse", "gtrendsR","censusapi")
package.check <- lapply(packages, FUN = function(x) {
if (!require(x, character.only = TRUE)) {
install.packages(x, dependencies = TRUE)
library(x, character.only = TRUE)
}})
res <- gtrends(c("crime", "loans"), geo = "US-IL", time = "2016-01-01 2016-12-31", low_search_volume = TRUE)
res1 <- as_tibble(res$interest_by_city)
head(res1)
res1 %>%
group_by(keyword) %>%
summarise(hits_mean = mean(hits, na.rm = TRUE),
hits_median = median(hits, na.rm = TRUE),
hits_sd = sd(hits, na.rm = TRUE))
res2 <- pivot_wider(res1,
names_from = keyword,
values_from = hits)
is_tibble(res1)
is_tibble(res)
is_tibble(as_tibble(res$interest_by_city))
res1 <- as_tibble(res$interest_by_city)
head(res1)
names(res1)
res2 <- pivot_wider(res1,
id_cols =location,
names_from = keyword,
values_from = hits)
res2 <- pivot_wider(res1,
id_cols =location,
names_from = keyword,
values_from = hits,
values_fn = {summary_fun})
res2 <- pivot_wider(res1,
id_cols =location,
names_from = keyword,
values_from = hits)
res2 <-   res1 %>%
pivot_wider(names_from = keyword,
values_from = hits,
values_fn = function(x) paste(x, collapse=","))
head(res2)
res2 %>%
arrange(desc(loans))
View(res2)
res2 <-   res1 %>%
pivot_wider(names_from = keyword,
values_from = hits,
values_fn = )
?pivot_wider
res2 <-  spread(res1, keyword, hits)
res2 <-tidyr:::spread.data.frame(res1, keyword, hits)
res2 <-  spread(res1, keyword, hits)
res2 <-  res1 %>%
spread(keyword, hits)
res2 <-  res1 %>%
spread(keyword, hits)
res2 <-  res1 %>%
spread(hits, keyword)
res2 <-  res1 %>%
spread(keyword, hits)
res2 <-   res1 %>%
pivot_wider(names_from = keyword,
values_from = hits)
head(res2)
res1 %>%
pivot_wider(names_from = keyword, values_from = hits)
res1 %>%
pivot_wider(names_from = keyword, values_from = hits, values_fn = list)
res2 <-  res1 %>%
pivot_wider(names_from = keyword, values_from = hits, values_fn = list)
View(res2)
res2 <-  res1 %>%
pivot_wider(names_from = keyword, values_from = hits, values_fn = list)
View(res2)
res2 %>%
arrange(desc(loans))
plot(crime, loans, data=res2)
packages = c("tidyverse", "gtrendsR","censusapi","dplyr","tidyr")
package.check <- lapply(packages, FUN = function(x) {
if (!require(x, character.only = TRUE)) {
install.packages(x, dependencies = TRUE)
library(x, character.only = TRUE)
}})
res <- gtrends(c("crime", "loans"), geo = "US-IL", time = "2016-01-01 2016-12-31", low_search_volume = TRUE)
res <- gtrends(c("crime", "loans"), geo = "US-IL", time = "2016-01-01 2016-12-31", low_search_volume = TRUE)
plot(res)
names(res)
is_tibble(res)
is_tibble(as_tibble(res$interest_by_city))
res1 <- as_tibble(res$interest_by_city)
head(res1)
res1 %>%
group_by(keyword) %>%
summarise(hits_mean = mean(hits, na.rm = TRUE),
hits_median = median(hits, na.rm = TRUE),
hits_sd = sd(hits, na.rm = TRUE))
res2 <- pivot_wider(res1,
names_from = keyword,
values_from = hits)
res3<- res1 %>%
pivot_wider(names_from = keyword, values_from = hits, values_fill = 0)
db <- gtrends(c("crime", "loans"), geo = "US-IL", time = "2016-01-01 2016-12-31", low_search_volume = TRUE)
plot(db)
db1 <- as_tibble(db$interest_by_city)
head(db1)
View(db1)
db2 <- pivot_wider(db1,
names_from = keyword,
values_from = hits)
rm(list=ls())
packages = c("tidyverse", "gtrendsR","censusapi","dplyr","tidyr")
package.check <- lapply(packages, FUN = function(x) {
if (!require(x, character.only = TRUE)) {
install.packages(x, dependencies = TRUE)
library(x, character.only = TRUE)
}})
rm(list=ls())
packages = c("tidyverse", "xml2","rvest","jsonlite","robotstxt","RSocrata")
package.check <- lapply(packages, FUN = function(x) {
if (!require(x, character.only = TRUE)) {
install.packages(x, dependencies = TRUE)
library(x, character.only = TRUE)
}})
