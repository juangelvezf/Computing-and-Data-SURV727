for(i) {
function.square <- function(a) {
for(i in a:a) {
b <- sqrt(i)
print(b)
}
}
function.square(6)
set.seed(1002)
df <- data.frame(replicate(10, sample(c(1:10, c(-99,-98,-5)), 6, rep = TRUE)))
names(df) <- letters[1:6]
df
View(df)
View(df)
df1<- df %>%
select() %>%
mutate( = na_if(, "-"))
View(df)
df1<- df %>%
mutate(
a   = na_if_in(a, ~ . < 0)
)
packages = c("tidyverse","readxl","ggplot2","haven")
package.check <- lapply(packages, FUN = function(x) {
if (!require(x, character.only = TRUE)) {
install.packages(x, dependencies = TRUE)
library(x, character.only = TRUE)
}})
df1<- df %>%
mutate(
a   = na_if_in(a, ~ . < 0)
)
na_if_in(df, ~ . < 0)
library(dplyr)
df %>%
mutate(
a = na_if_in(a,  ~ . < 0)
)
is.na(df$a) <- df$a < 0
View(df)
is.na(df) <- df < 0
View(df)
set.seed(1002)
df <- data.frame(replicate(10, sample(c(1:10, c(-99,-98,-5)), 6, rep = TRUE)))
names(df) <- letters[1:6]
df
#function
is.na(df) <- df < 0
df
class(df)
df <- data.frame(replicate(10, sample(c(1:10, c(-99,-98,-5)), 6, rep = TRUE)))
names(df) <- letters[1:6]
df
class(df)
#function
is.na(df) <- df < 0
df
class(df)
set.seed(1002)
df <- data.frame(replicate(10, sample(c(1:10, c(-99,-98,-5)), 6, rep = TRUE)))
names(df) <- letters[1:6]
df
class(df)
#function
df= ifelse(df < 0, NA_real_, df)
df
class(df)
class(df)
set.seed(1002)
df <- data.frame(replicate(10, sample(c(1:10, c(-99,-98,-5)), 6, rep = TRUE)))
names(df) <- letters[1:6]
df
class(df)
#function
is.na(df) <- df < 0
df
class(df)
#function
df= ifelse(df < 0, NA_real_, df)
df
class(df)
View(df)
set.seed(1002)
df <- data.frame(replicate(10, sample(c(1:10, c(-99,-98,-5)), 6, rep = TRUE)))
names(df) <- letters[1:6]
df
class(df)
#function
df %>%
mutate(a = na_if(a, "NA!"))
View(df)
#function
df %>%
if (y <  0) {
"NA !"
}
set.seed(1002)
df <- data.frame(replicate(10, sample(c(1:10, c(-99,-98,-5)), 6, rep = TRUE)))
names(df) <- letters[1:6]
df
class(df)
#function
df= ifelse(df < 0, NA_real_, df)
df
set.seed(1002)
df <- data.frame(replicate(10, sample(c(1:10, c(-99,-98,-5)), 6, rep = TRUE)))
names(df) <- letters[1:6]
df
class(df)
#function
is.na(df) <- df < 0
df
class(df)
set.seed(1002)
df <- data.frame(replicate(10, sample(c(1:10, c(-99,-98,-5)), 6, rep = TRUE)))
names(df) <- letters[1:6]
df
class(df)
set.seed(1002)
df <- data.frame(replicate(10, sample(c(1:10, c(-99,-98,-5)), 6, rep = TRUE)))
names(df) <- letters[1:6]
df
class(df)
typeof(A)
A <- c("2", "3", "4", "5", "6", "7", "8")
typeof(A)
B <- (1:10)
B
typeof(B)
B
B1<-replace(B,B==3,3.5)
B1
typeof(B1)
typeof(B1)
B
B1<-replace(B,B==3,3.5)
B1
B1<-replace(B,B==3,3.5)
B1
typeof(B1)
angell_stata <- read_dta("data/angell.dta")
head(angell_stata)
angell_txt2<-tail(angell_txt, -5)
angell_txt <- read.table("data\\angell.txt")
head(angell_txt)
angell_txt2<-tail(angell_txt, -5)
head(angell_txt2)
B
B1<-replace(B,3,3.5)
B1
typeof(B1)
B <- (1:10)
B
typeof(B)
B
B1<-replace(B,B==3,3.5)
B1
B<-replace(B,B==3,3.5)
B
typeof(B)
set.seed(1002)
df <- data.frame(replicate(10, sample(c(1:10, c(-99,-98,-5)), 6, rep = TRUE)))
names(df) <- letters[1:6]
df
class(df)
#function
into_NA <- function (x) {
x <- replace(x, x < 0, NA)
print(x)
}
into_NA(df)
class(df)
set.seed(1002)
df <- data.frame(replicate(10, sample(c(1:10, c(-99,-98,-5)), 6, rep = TRUE)))
names(df) <- letters[1:6]
df
class(df)
#function
into_NA <- function (x) {
x <- replace(x, x < 0, NA)
print(x)
}
class(df)
into_NA(df)
typeof(df)
set.seed(1002)
df <- data.frame(replicate(10, sample(c(1:10, c(-99,-98,-5)), 6, rep = TRUE)))
names(df) <- letters[1:6]
df
typeof(df)
set.seed(1002)
df <- data.frame(replicate(10, sample(c(1:10, c(-99,-98,-5)), 6, rep = TRUE)))
names(df) <- letters[1:6]
df
class(df)
#function
into_NA_ <- function (x) {
x <- replace(x, x < 0, "NA!")
print(x)
}
into_NA_(df)
rm(list=ls())
packages = c("tidyverse","readxl","ggplot2","haven")
package.check <- lapply(packages, FUN = function(x) {
if (!require(x, character.only = TRUE)) {
install.packages(x, dependencies = TRUE)
library(x, character.only = TRUE)
}})
install.packages("MASS")
library(MASS)
head(Boston)
library(tidyverse)
library(gtrendsR)
library(tidyverse)
library(gtrendsR)
library(censusapi)
res <- gtrends(c("crime", "loans"), geo = "US-IL", time = "2016-01-01 2016-12-31", low_search_volume = TRUE)
plot(res)
head(res)
as_tibble(res)
is_tibble(res)
res1 <- as_tibble(res)
is_tibble(res)
res1 <- as_tibble(res)
head(res)
is_tibble(res::location)
is_tibble(as_tibble(res))
is_tibble(as_tibble(res$location))
res1 <- as_tibble(res$location)
res1$location
res1$location
head(res1)
View(res)
names(res)
is_tibble(as_tibble(res$interest_by_city))
res1 <- as_tibble(res$interest_by_city)
head(res1)
View(res)
names(res)
is_tibble(res)
is_tibble(as_tibble(res$interest_by_city))
res1 <- as_tibble(res$interest_by_city)
head(res1)
fivenum(res1$interest_by_city)
res1 %>%
fivenum(interest_by_city$keyword)
res1 %>%
fivenum(interest_by_city$keyword)
res1 %>%
fivenum(res1$keyword)
res1 %>%
fivenum(res1$keyword)
res1 %>% group_by(keyword) %>%
summarise(sd = sd(),
mean = mean(),
median=median())
View(res1)
res1 %>% group_by(keyword) %>%
summarise(sd = sd(),
mean = mean(),
median=median())
res1 %>% group_by(keyword) %>%
summarise(sd = sd(keyword),
mean = mean(keyword),
median=median(keyword))
res1 %>% group_by(keyword) %>%
summarise(sd = sd(keyword, na.rm = T),
mean = mean(keyword, na.rm = T),
median=median(keyword, na.rm = T))
mean(res1$keyword, na.rm = T)
res1 %>% group_by(keywords) %>%
summarise(RT = mean(RT, na.rm = T))
res1 %>% group_by(keyword) %>%
summarise(RT = mean(RT, na.rm = T))
res1 %>% group_by(keyword) %>%
summarise(crime = mean(crime, na.rm = T))
library(dplyr)
res1 %>%
summarise(mean = mean(keyword$crime, na.rm = TRUE),
sd = sd(keyword$crime, na.rm = TRUE))
res1 %>%
summarise(mean = mean(keyword, na.rm = TRUE),
sd = sd(keyword, na.rm = TRUE))
res1 %>%
group_by(keyword) %>%
summarise(hits_mean = mean(hits, na.rm = TRUE),
hits_sd = sd(hits, na.rm = TRUE))
res1 %>%
group_by(keyword) %>%
summarise(hits_mean = mean(hits, na.rm = TRUE),
hits_median = median(hits, na.rm = TRUE)
hits_sd = sd(hits, na.rm = TRUE))
res1 %>%
group_by(keyword) %>%
summarise(hits_mean = mean(hits, na.rm = TRUE),
hits_median = median(hits, na.rm = TRUE),
hits_sd = sd(hits, na.rm = TRUE))
View(res1)
library(dplyr)
library(tidyr)
is_tibble(res1)
is_tibble(res)
View(res1)
interest_city_w <- pivot_wider(res1,
names_from = keyword,
values_from = hits)
library(tidyr)
library(tidyr)
interest_city_w <- pivot_wider(res1,
names_from = keyword,
values_from = hits)
head(interest_city_w)
res2 <- pivot_wider(res1,
names_from = keyword,
values_from = hits)
head(res2)
head(res2)
res2 %>% loans(6)
library(tidyverse)
library(tidyverse)
library(gtrendsR)
library(censusapi)
library(tidyr)
library(dplyr)
res2 %>%
loans(6)
res2 %>% slice_max(loans, n = 6)
qplot(crime, loans, data=res2)
qplot(loans, crime, data=res2)
head(res1)
qplot(loans, crime, data = res2, geom = c("point", "smooth"))
qplot(loans, crime, data=res2)
qplot(loans, crime, data=res1)
2
qplot(loans, crime, data=res2)
cs_key <- "412c45f7f8f25f31dfa9121b48f369df61b2711c"
acs_il <- getCensus(name = "acs/acs5",
vintage = 2016,
vars = c("NAME", "B01001_001E", "B06002_001E", "B19013_001E", "B19301_001E"),
region = "place:*",
regionin = "state:17",
key = cs_key)
cs_key <- "412c45f7f8f25f31dfa9121b48f369df61b2711c"
cs_key <- "412c45f7f8f25f31dfa9121b48f369df61b2711c"
acs_il <- getCensus(name = "acs/acs5",
vintage = 2016,
vars = c("NAME", "B01001_001E", "B06002_001E", "B19013_001E", "B19301_001E"),
region = "place:*",
regionin = "state:17",
key = cs_key)
acs_il <- getCensus(name = "acs/acs5",
vintage = 2016,
vars = c("NAME", "B01001_001E", "B06002_001E", "B19013_001E", "B19301_001E"),
region = "place:*",
regionin = "state:17",
key = cs_key)
head(acs_il)
cs_key <- "412c45f7f8f25f31dfa9121b48f369df61b2711c"
acs_il <- getCensus(name = "acs/acs5",
vintage = 2016,
vars = c("NAME", "B01001_001E", "B06002_001E", "B19013_001E", "B19301_001E"),
region = "place:*",
regionin = "state:17",
key = "412c45f7f8f25f31dfa9121b48f369df61b2711c")
head(acs_il)
acs_il[acs_il == -666666666] <- NA
acs_il <-
acs_il %>%
rename(pop = B01001_001E, age = B06002_001E, hh_income = B19013_001E, income = B19301_001E)
acs_il %>%
slice_max(NAME)
acs_il %>%
slice_max(NAME, n = 6)
acs_il2 <- acs_il %>% separate(NAME, c('location', 'state'))
print(" Data frame after splitting: ")
acs_il2
acs_il2 <- acs_il %>% separate(NAME, c('location', 'NAME'))
print(" Data frame after splitting: ")
acs_il2
acs_il2 %>%
slice_max(NAME, n = 6)
acs_il2
head(acs_il2)
acs_il2 %>%
slice_max(location, n = 6)
head(res2)
View(acs_il2)
sum(is.na(res2$location))
sum(is.na(acs_il2$location))
View(acs_il2)
table(acs_il2$location)
new_data<- inner_join(res2, acs_il2, by ='location')
library(tidyverse)
library(tidyverse)
library(gtrendsR)
library(censusapi)
library(dplyr)
library(tidyr)
new_data<- inner_join(res2, acs_il2, by ='location')
head(new_data)
new_data %>%
slice_max(pop, n = 10)
library(tidyverse)
library(tidyverse)
library(gtrendsR)
library(censusapi)
library(dplyr)
library(tidyr)
new_data %>%
slice_max(pop, n = 10)
new_data %>%
group_by(hh_income>=mean(hh_income)) %>%
summarise_at(vars(crime), list(name = mean))
new_data %>%
mean(pop)
new_data %>%
mean(pop)
new_data %>%
mean(pop,na.rm =True)
new_data %>%
mean(crime, na.rm =True)
new_data %>%
group_by(state) %>%
summarise_at(vars(crime), list(name = mean))
new_data %>%
group_by(state) %>%
summarise_at(vars(crime,na.rm = TRUE), list(name = mean))
new_data %>%
group_by(state) %>%
mean(crime,na.rm = TRUE))
new_data %>%
group_by(state) %>%
mean(crime,na.rm = TRUE)
new_data %>%
group_by(state) %>%
mean(pop,na.rm = TRUE)
qplot(loans, hh_income, data=new_data)
qplot(loans, hh_income, data=new_data, , geom = c("point", "smooth"))
qplot(loans, hh_income, data=new_data, , geom = c("point"))
, "smooth
qplot(loans, hh_income, data=new_data, , geom = c("point", "smooth"))
mean(new_data$hh_income)
mtcars %>%
group_by(hh_income > 54379.19)%>%
mean(pop,na.rm = TRUE)
new_data$hh_income_level <- 0
new_data$hh_income_level[which(new_data$hh_income > 54379.19)] <-1
new_data %>%
group_by(hh_income_level) %>%
mean(pop,na.rm = TRUE)
result <- new_data %>%
group_by(hh_income_level) %>%
summarise(mean_crime = mean(crime))+
summarise(mean_crime = mean(loans))
result <- new_data %>%
group_by(hh_income_level) %>%
summarise(mean_crime = mean(crime))+
summarise(mean_loans = mean(loans))
result <- new_data %>%
group_by(hh_income_level) %>%
summarise(mean_crime = mean(crime))
result
result <- new_data %>%
group_by(hh_income_level) %>%
summarise(mean_crime = mean(crime))%>%
summarise(mean_loans = mean(loans))
result <- new_data %>%
group_by(hh_income_level) %>%
summarise(mean_crime = mean(crime, na.rm = TRUE)))
head(new_data$hh_income_level)
new_data$hh_income_level <- "Below average median household income"
new_data$hh_income_level[which(new_data$hh_income > 54379.19)] <-"Above average median household income"
new_data %>%
group_by(hh_income_level) %>%
mean(pop,na.rm = TRUE)
result <- new_data %>%
group_by(hh_income_level) %>%
summarise(mean_crime = mean(crime, na.rm = TRUE)))
result <- new_data %>%
group_by(hh_income_level) %>%
summarise(mean_crime = mean(crime)))
result <- new_data %>%
group_by(hh_income_level) %>%
summarise(mean_crime = mean(crime))
result
result <- new_data %>%
group_by(hh_income_level) %>%
summarise(mean_crime = mean(crime, na.rm = TRUE))
result
result <- new_data %>%
group_by(hh_income_level) %>%
summarise(mean_crime = mean(crime, na.rm = TRUE))+
summarise(mean_loans = mean(loans, na.rm = TRUE))
result <- new_data %>%
group_by(hh_income_level) %>%
summarise(mean_crime = mean(crime, na.rm = TRUE)) %>%
summarise(mean_loans = mean(loans, na.rm = TRUE))
result <- new_data %>%
group_by(hh_income_level) %>%
summarise(mean_crime = mean(crime, na.rm = TRUE))
result
mean_crime_loan <- new_data %>%
group_by(hh_income_level) %>%
summarise(mean_loans = mean(loans, na.rm = TRUE))
mean_crime_hhincome <- new_data %>%
group_by(hh_income_level) %>%
summarise(mean_crime = mean(crime, na.rm = TRUE))
mean_loans_hhincome <- new_data %>%
group_by(hh_income_level) %>%
summarise(mean_loans = mean(loans, na.rm = TRUE))
mean_crime_hhincome
mean_loans_hhincome
